<head>
  <title>Kiwii</title>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="../css/main.css" />
</head>

<body>

  <label class="toggle-nsfw">
    <span class="ON-OFF">OFF</span>
    <input type="checkbox" />
    <span class="slider round"></span>
  </label>

  <section class="main-content">
    <script>
      let n = null;
      const checkbox = document.querySelector('.toggle-nsfw input');
      if (checkbox.checked) {
        localStorage.setItem('nsfw', 'true');
      } else {
        localStorage.setItem('nsfw', 'false');
      }
      const onOff = checkbox.parentNode.querySelector('.ON-OFF');
      const nsfw = localStorage.getItem('nsfw');
      if (nsfw === 'true') {
        n = true;
        checkbox.checked = true;
        onOff.textContent = 'ON';
      } else {
        n = false;
        checkbox.checked = false;
        onOff.textContent = 'OFF';
      }

      checkbox.addEventListener('click', () => {
        onOff.textContent = checkbox.checked ? 'ON' : 'OFF';
        if (checkbox.checked) {
          localStorage.setItem('nsfw', 'true');
        } else {
          localStorage.setItem('nsfw', 'false');
        }
      });
    </script>
    <p>Commands of <%= client.user.tag %></p>
    <% for(const c of commands) { %>
    <% let { name, value } = c; %>
    <!-- <script>
      if('<%# value %>' === 'nsfw') {
        '<%# value %>' = 'asj'
      }
    </script> -->
    <table>
      <h1><%= upperFirstButAcceptEmojis(beautifyCategories(name)) %></h1>
      <tr>
        <th>Commands</th>
        <th>Description</th>
        <th>Usage</th>
        <th>Aliases</th>
      </tr>
      <% value = value.filter((c) => c.category === name) %>
      <% for(const command of value) { %>
      <% const { name: commandName, description, aliases, utilisation, category } = command; %>
      <tr>
        <td><%= commandName %></td>
        <td>
          <%- description.replace(/`(.+?)`/g, '<code class="code-style">$1</code>') %>
        </td>
        <td><%= utilisation.replace('{prefix}', client.prefix)%>

        </td>
        <td><%= typeof aliases === 'string' ? aliases : aliases.join(', ');%></td>
      </tr>
      <% } %>
    </table>
    <% } %>
  </section>
</body>